{
  "hash": "a6979723592aacf0059f588a9f42e50b",
  "result": {
    "markdown": "---\ntitle: \"Aula5\"\nauthor: \"Nívia\"\nformat: html\n---\n\n\n# Segundo plot\n\n## Importa dados\n\nSempre carregar primeiro o tidyverse e depois o pacote que irá usar para importar os dados, no caso de planilhas excel, o pacote readxl. Após isso, deve escolher a atribuição dos dados.\n\n\n::: {.cell hash='Aula5_cache/html/unnamed-chunk-1_becc913d8c062b002486dd66179b404d'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\nmg <- read_excel(\"dados-diversos.xlsx\")\n```\n:::\n\n\n## Visualiza\n\nO ggplot é o pacote usado para visualização dos dados. Para visualizar os dados, basta usar a função ggplot.É importante que se defina antes quem será o eixo x e y (no caso, y é o comprimento da lesão, enquanto x são os tratamentos - controle e mg2). Depois, usa a função aes (aesthetic) do que deseja que apareça no gráfico e adiciona a camada geom_point para que os dados sejam vistos em forma de pontos.\n\n\n::: {.cell hash='Aula5_cache/html/unnamed-chunk-2_617a0f81253b45fabe770527245bd31f'}\n\n```{.r .cell-code}\nmg |> \n  ggplot(aes(trat, comp))+\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](Aula5_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nMuitas vezes, ocorre a sobreposição de pontos no gráfico. Para desagregar esses pontos, usa-se a função geo_jitter e, para evitar que os dados fiquem muiito dispersos, pode-se definir a largura.\n\n\n::: {.cell hash='Aula5_cache/html/unnamed-chunk-3_41fec14145317aa21d026347efe7c3e3'}\n\n```{.r .cell-code}\nmg |> \n  ggplot(aes(trat, comp))+\n  geom_jitter(width = 0.1)\n```\n\n::: {.cell-output-display}\n![](Aula5_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nPara adicionar o boxplot e mudar a visão do gráfico, basta adicionar mais uma camada, ou seja, aciona função geom_boxplot.\n\n\n::: {.cell hash='Aula5_cache/html/unnamed-chunk-4_de5d8d2cd3e59ca5847801ff15f6234b'}\n\n```{.r .cell-code}\nmg |> \n  ggplot(aes(trat, comp))+\n  geom_boxplot()+\n  geom_jitter(width = 0.1)\n```\n\n::: {.cell-output-display}\n![](Aula5_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nPara tirar a cor do outlier, aumentar o tamanho dos pontos e colorir o boxplot:\n\n\n::: {.cell hash='Aula5_cache/html/unnamed-chunk-5_a39ea2f066093f8ea08fd3a1c351f5c0'}\n\n```{.r .cell-code}\np_box <- mg |> \n  ggplot(aes(trat, comp))+\n  geom_boxplot(outlier.color = NA,\n               fill = \"orange\",\n               size = 0.5)+\n  geom_jitter(width = 0.1,\n              height = 0,\n              color = \"black\")+\n  scale_y_continuous(limits = c(5,20), \n                     n.breaks = 10)+\n  labs(y = \"Lesion size (mm)\",\n       x = \" \")+\n  theme_bw()\np_box\n```\n\n::: {.cell-output-display}\n![](Aula5_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"figs/plot2.png\", bg = \"white\")\n```\n:::\n\n\nPara sumarizar os dados, usa-se a summarise e função media da variável comprimento. Depois disso, transforma no ggplot e muda a estética. Para adicionar a barra de erro, usa-se a função errorbar. Para omitir os comandos das colunas, basta adicionar uma \\# na frente da linha de comando.\n\n\n::: {.cell hash='Aula5_cache/html/unnamed-chunk-6_b50322002c2915b343452fa2f1f0fdf4'}\n\n```{.r .cell-code}\np_means <- mg |>\n  group_by(trat) |>\n  summarise(comp_mean = mean(comp),\n            comp_sd = sd(comp)) |>\n  ggplot(aes(trat, comp_mean))+\n  #geom_col(fill = \"orange\",\n           #width = 0.5)+\n  geom_point()+\n  scale_y_continuous(limits = c(7,18), \n                     n.breaks = 6)+\n  geom_errorbar(aes(ymin = comp_mean - comp_sd, \n                    ymax = comp_mean + comp_sd,\n                    width = 0.05))+\n  theme_bw()+\n  labs(y = \"Lesion size (mm)\",\n       x = \" \")\np_means\n```\n\n::: {.cell-output-display}\n![](Aula5_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\n#salvando gráfico\nggsave(\"figs/mean_sd.png\", \n       width = 4,\n       bg = \"white\")\n```\n:::\n\n\nInstalando o ggthemes e carregando pacote:\n\n\n::: {.cell hash='Aula5_cache/html/unnamed-chunk-7_3112ea857eef93d2205887c89a0c7dd7'}\n\n```{.r .cell-code}\nlibrary(ggthemes)\n```\n:::\n\n\n## Composição de plots - Pacote PATCHWORK\n\nO patchwork torna possível combinar ggplots diferentes e separados em um mesmo gráfico. Depois de instalar, carrega o pacote. Para unis diferentes ggplots, é necessário utilizar o títullo desses ggplots separados pelo sinal de + ou pela barra reta (\\|).\n\n\n::: {.cell hash='Aula5_cache/html/unnamed-chunk-8_6c9b33e7d24447d5b1df4a3fcf09edb1'}\n\n```{.r .cell-code}\nlibrary(patchwork)\np_box + p_means\n```\n\n::: {.cell-output-display}\n![](Aula5_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n\n```{.r .cell-code}\n#ou então usar a função abaixo\np_box | p_means\n```\n\n::: {.cell-output-display}\n![](Aula5_files/figure-html/unnamed-chunk-8-2.png){width=672}\n:::\n\n```{.r .cell-code}\n# para adicionar letras A, B para identificar o grafico e adicionar titulo:\n(p_box | p_means)+\n  plot_annotation(tag_levels = \"A\",\n                  title = 'Gráficos que impressionam')\n```\n\n::: {.cell-output-display}\n![](Aula5_files/figure-html/unnamed-chunk-8-3.png){width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"figs/combined.png\")\n```\n:::\n\n\n## Gráfico com dados survey\n\nPara inverter as barras usa-se a função coord_flip().\n\n\n::: {.cell hash='Aula5_cache/html/unnamed-chunk-9_75ea6548fb09766fc52ae899ac68a02a'}\n\n```{.r .cell-code}\nsurvey <- read_excel(\"dados-diversos.xlsx\",\n                     sheet = \"survey\")\nsurvey |> \n  filter(state == \"RS\") |>\n  #Para contar o numero de ocorrencias em cada classe:\n  count(species) |>\n  ggplot(aes(species, n))+\n  geom_col(width = 0.4,\n           fill = \"steelblue\")+\n  coord_flip()+\n  labs(x = \" \", y = \"Number of isolates\",\n       tiltle = \"Horizontal bar plot\",\n       subtitle = \"Using ggplot\")+\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](Aula5_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n\n```{.r .cell-code}\n  ggsave(\"Figs/barplot.png\", bg = \"white\")\n```\n:::\n\n\n## Adiconar faceta\n\nFução facet_wrap:\n\n\n::: {.cell hash='Aula5_cache/html/unnamed-chunk-10_929b7c9d3b5cd0e20a0b06a2225216a5'}\n\n```{.r .cell-code}\nsurvey |> \n  filter(state == \"RS\") |>\n  count(species, residue) |>\n  ggplot(aes(species, n))+\n  geom_col(width = 0.4,\n           fill = \"steelblue\")+\n  coord_flip()+\n  facet_wrap(~residue, ncol = 1)+\n  labs(x = \" \", y = \"Number of isolates\",\n       tiltle = \"Horizontal bar plot\",\n       subtitle = \"Using ggplot\")+\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](Aula5_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n\n```{.r .cell-code}\n  ggsave(\"Figs/barplotfacet.png\", bg = \"white\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}