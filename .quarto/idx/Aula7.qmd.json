{"title":"Aula7","markdown":{"yaml":{"title":"Aula7","author":"Nívia","format":"html"},"headingText":"Transformação de dados no R - log e srqt","containsRefs":false,"markdown":"\n\n\nAntes de realizar uma análise estatística no R, pode ser necessário realizar transformações nos dados, dependendo da natureza dos dados e dos requisitos da análise. As transformações podem ajudar a atender aos pressupostos da análise estatística, como a normalidade e a homogeneidade de variâncias.\n\n## Exploração dos dados\n\nAntes de realizar transformações, precisamos entender a natureza dos dados, então vamos nos familiarizar com um conjunto de dados, nesse caso, o conjunto de dados mofo, presente dentro do banco de dados da planilha dados-diversos.\n\n```{r}\n#| warning: false\n#| message: false\nlibrary(tidyverse)\nlibrary(readxl)\n\nmofo <- read_excel(\"dados-diversos.xlsx\", \"mofo\")\n```\n\nOs dados podem ser visualizados de diferentes formas - gráficos de dispersão, histogramas, boxplots, etc. Inicialmente, vamos visualizar os dados de inc (incidência) pelos tratamentos e pelo estudo (tratamento dentro de estudo). Então, o tratamento vai dentro do ggplot, enquanto o study vai dentro de facet. A função facet_wrap() replica o gráfico especificado para cada categoria de uma coluna.\n\n```{r}\nmofo |>\n  ggplot(aes(treat, inc))+\n  facet_wrap(~study)+\n  geom_point()\n```\n\nTambém pode usar a função geom_col para visualizar os dados de uma forma diferente.\n\n**Histograma**: Faremos um histograma para visualizar a incidência e outro para visualizar os dados de escleródio.\n\n```{r}\ninc <- mofo |>\n  ggplot(aes(inc))+\n  geom_histogram()\n#Para o scleródio\nmofo |>\n    ggplot(aes(scl))+\n    geom_histogram()\n```\n\n**Boxplot**: montaremos um boxplot para visualizar os dados de scl.\n\n```{r}\nscl <- mofo |>\n  ggplot(aes(scl))+\n  geom_boxplot()\n```\n\nAgora, como já aprendido, juntaremos os 2 gráficos, para isso, devemos carregar o pacote patchwork:\n\n```{r}\nlibrary(patchwork)\ninc + scl\n```\n\nApós isso, podemos encontrar a média dos dados. Para achar a média podemos usar as funções \\$, mean+conjunto ou summary.\n\n```{r}\nmofo$scl\nmean(mofo$scl)\n```\n\n## Finalmente transformando os dados\n\nNós podemos transformar os dados de diferentes maneiras, sendo as mais comuns log e raiz quadrada. **Transformação logarítmica**: é útil quando os dados possuem uma distribuição assimétrica positiva ou quando a variação aumenta exponencialmente com o aumento dos valores. Para transformar os dados para o logaritimo dos números usa-se a função log (). Podemos realizar essa transformação com o uso da função mutate. Através da função mutate() realizamos a criação/adição de uma nova variável (ou novas variaveis), que são funções de variáveis existentes, e também criamos/modificamos colunas.\n\n```{r}\nmofo2 <- mofo |>\n  mutate (scl2 = log(scl))\n  mofo2\n```\n\nAgora, podemos visualizar os dados tranformados em log por meio de um histograma, da mesma forma feita acima.\n\n```{r}\nmofo2 |>\n    ggplot(aes(scl2))+\n    geom_histogram(bins = 10)\n\n```\n\n**Transformação em raiz quadrada**: é útil para reduzir a assimetria em dados com uma distribuição assimétrica positiva. Para transformar os dados em raiz quadrada, usamos a função mutate e sqrt ().\n\n```{r}\nmofo2 <- mofo |>\n  mutate (scl2 = sqrt(scl))\n  mofo2\n  mofo2 |>\n    ggplot(aes(scl2))+\n    geom_histogram(bins = 10)\n```\n\nAgora, testaremos os dados da variável produtividade.\n\n```{r}\nmofo2 |>\n    ggplot(aes(yld))+\n    geom_histogram(bins = 10)\n```\n\n### Usando a função arrange\n\nFaremos uso agora da função arrange com o conjunto de dados survey. A função arrange () é usada para ordenar linhas. Essa função ordena os dados por ordem crescente ou decrescente (depende se coloca o sinal de menos ou não dentro da função). O primeiro argumento é a base de dados, os demais argumentos são as colunas pelas quais queremos ordenar as linhas. A função slice mostra determinada linha pela posição dela, que você solicita. A função filter escolhe casos com base em seus valores. A função count conta o número de linhas com cada valor exclusivo de uma variável (com ou sem pesos). A função slice seleciona linhas por posição.\n\n```{r}\nsurvey <- read_excel(\"dados-diversos.xlsx\", \"survey\")\n\n\nsurvey |>\n  filter(state == \"RS\") |>\n  count(species, residue) |>\n  arrange(n) |>\n#slice(1) |>\nrename(res = residue) |>\nmutate(n_class = case_when(\n  n < 30 ~ \"baixa\",\n       TRUE ~ \"Alta\"))\n```\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":true,"freeze":"auto","echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"Aula7.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.269","editor":"visual","fontsize":"1.1em","theme":{"light":"flatly","dark":"darkly"},"title":"Aula7","author":"Nívia"},"extensions":{"book":{"multiFile":true}}}}}