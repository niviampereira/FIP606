{"title":"Aula4_visualização","markdown":{"yaml":{"title":"Aula4_visualização","author":"Nívia","format":"html"},"headingText":"Gráficos em ggplot","containsRefs":false,"markdown":"\n\n\n## Importação de dados\n\nO pacote ggplot2 pode ser carregado individualmente, ou pode ser carregado pelo tidyverse.Após carregar o pacote, importa-se um banco de dados para trabalho. Para o formato csv, é necessário carregar o pacote tidyverse. As variáveis podem ser categóricas ou numéricas. As variáveis categóricas são entendidas no R como caracteres.\n\n```{r}\nlibrary(tidyverse)\nmg <- read_csv(\"dados-diversos.csv\")\n\n```\n\n## GGPLOT - Definindo camadas\n\nA primeira função para criar um ggplot é a função ggplot, que define o conjunto de dados e elementos de estética dos gráficos.O primeiro elemento da função é o conjunto de dados a ser utilizado. A programação de gráficos em ggplot2 é feito na forma de camadas, que são adiconadas a medida que se confecciona o gráfico, por isso que se usa o sinal de +, porque significa a adição de mais uma camada. O primeiro argumento da função é o data frame onde nossos dados foram armazenados (Ex. mg). Usa-se o pipe (\\|\\>) para enfatizar uma sequência de comandos ou ações no chunk e para evitar adiconar o nome do dataframe dentro da função ggplot. O pipe deve ter sempre um espaço antes dele e, geralmente, deve ser seguido por uma nova linha. Após a primeira etapa, cada linha deve ter dois espaços, o que torna mais fácil adicionar outras etapas ou reorganizar as já existentes.\n\n```{r}\nlibrary(ggplot2)\n```\n\nA função ggplot() define o plano com os eixos x e y. Uma das primeiras funções em ggplot é a aes, usada para descrever como as variáveis são mapeadas (eixos x e y). Para adionar cor usa-se a função color = nopme da cor. Ao incluir esta função dentro da função aes, dizemos ao ggplot que os pontos devem ser mapeados esteticamente utilizando cores para cada variavel (ex.irrigação). A função geo_point define que a forma geométrica a ser utilizada é baseada em pontos, gerando um gráfico de dispersão. A função alpha trabalha com a tansparência.\n\n```{r}\nmg |>\n  ggplot(aes(Irrigation, severity, color = Irrigation))+\n  geom_point(alpha = 0.5)\n```\n\nA função shape é utilizada para adicionar diferentes formas ou tipos de marcadores para diferenciar as variáveis (ex. quadrado e triângulo).\n\n```{r}\nmg |>\n  ggplot(aes(Irrigation, severity, shape = Irrigation))+\n  geom_point(alpha = 0.5)\n```\n\nAgora, mudamos a váriavel irrigation por day. Para isso, basta subtituir a variável dentro da função aes. A função filtro, como o próprio nome remete, filtra determinadas linhas e a função geom_line transforma o gráfico em um gráfico de linhas:\n\n```{r}\n# mudando para a variável day\nmg |> \n  ggplot(aes(day, severity, shape = Irrigation))+\n  geom_point(alpha = 0.5)\n\n# Deixando apenas 1 repetição - função filter e alterando para gráfico de linhas\nmg |> \n  filter(rep == 1) |>\n  ggplot(aes(day, severity, shape = Irrigation))+\n  geom_point(alpha = 0.5)+geom_line()\n```\n\nA função facet_wrap adiciona facetas.Ou seja, com essa função informamos que um grafico deve ser criado para cada ambiente, um grafico digferente para cada variável.\n\n```{r}\n# Dividindo o número de repetições - função facet_wrap\nmg |> \n  ggplot(aes(day, severity, shape = Irrigation))+\n  geom_point(alpha = 0.5)+\n  geom_line()+\n  facet_wrap(~rep)\n```\n\nOutras funções:\n\n```{r}\n#Função select - seleciona colunas\nmg |> \nselect(Irrigation, severity) |>\nggplot(aes(Irrigation, severity, shape = Irrigation))+geom_point(alpha = 0.5)\n```\n\n### BoxPlot\n\nUsado para estatistica descritiva. Para adicionar um boxplot com o ggplot, basta fazer a adição da função geom_boxplot.\n\n```{r}\nmg |> \n  select(Irrigation, severity) |>\n  ggplot(aes(Irrigation, severity, shape = Irrigation))+geom_boxplot()+\n  geom_point(alpha = 0.5)\n\n# Mudando a variável irrigação por day\nmg |> \n  select(day, severity) |>\n  ggplot(aes(day, severity))+\n  geom_boxplot()+\n  geom_point(alpha = 0.5)\n\n# Separando por grupo - função group\nmg |> \n  select(day, severity) |>\n  ggplot(aes(day, severity, group = day))+\n  geom_boxplot()+\n  geom_point()\n\n# Retirando group e geom_boxplot\nmg |> \n  select(day, severity) |>\n  ggplot(aes(day, severity))+\n  geom_point()\n\n# Agrupando por repetição: As primeiras 3 linhas separam a severidade por dia.\nmg |> \n  select(day, rep, severity) |>\n  group_by(day) |>\n  summarise(sev = mean(severity)) |>\n  ggplot(aes(day, sev))+\n  geom_point()\n```\n\nCriando um novo conjunto, fazendo a media e adicionando titulo no gráfico:\n\n```{r}\nmg2 <- mg  |> \n  select(day, rep, severity) |>\n  group_by(day) |>\n  summarise(sev = mean(severity)) |>\n  ggplot(aes(day, sev))+\n  geom_point()\n\n```\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":true,"freeze":"auto","echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"Aula4.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.269","editor":"visual","fontsize":"1.1em","theme":{"light":"minty","dark":"flatly"},"title":"Aula4_visualização","author":"Nívia"},"extensions":{"book":{"multiFile":true}}}}}